<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>The Cabin in the City</title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_859455_eaq7v6w8ktj.css">
<meta name="generator" content="Hexo 4.2.1"></head>
<body>
<header class="header">
    <div class="header-inner">
        <div class="header-title">

        </div>
        <nav class="header-nav">
            
            <a href="/" class="header-nav-link" >
                Home
            </a>
            

            
            <a href="/archives" class="header-nav-link">
                Archives
            </a>
            

            
            <a href="/tags" class="header-nav-link">
                Tags
            </a>
            

            
            <a href="/about/" class="header-nav-link">
                About
            </a>
            
        </nav>
    </div>
</header>
<header class="mobile-header">
    <div class="mobile-nav">
        <div class="mobile-nav-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="mobile-nav-title">
            <a href="/" class="mobile-nav-title-link">'s Blog</a>
        </div>

    </div>
    <nav class="mobile-menu">
        <ul class="mobile-menu-list">
            <li class="mobile-menu-item">
                <i class="iconfont icon-home"></i>
                <a href="/" class="mobile-nav-link">Home</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-archive"></i>
                <a href="/archives" class="mobile-nav-link">Archives</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-tag"></i>
                <a href="/tags" class="mobile-nav-link">Tags</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-about"></i>
                <a href="/about/" class="mobile-nav-link">About</a>
            </li>
        </ul>
    </nav>
</header>
<div class="main">
    <div class="content-inner">
        <div class="posts">
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/Linux/Vim%20Editiong%20Basics/">Vim Editiong Basics</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2022-06-03</span>
                
                <span class="post-category">
                    
                    <a class="category" href="/categories/Linux/">Linux</a>
                    
                </span>
                
            </div>
            <div class="post-content">
                
                    <h1 id="Editing-Basics"><a href="#Editing-Basics" class="headerlink" title="Editing Basics"></a>Editing Basics</h1><h3 id="Buffers"><a href="#Buffers" class="headerlink" title="Buffers"></a>Buffers</h3><p>当你编辑一个文件时， Vim 将磁盘上的文件内容读取到计算机的 RAM 中. 这意味这文件的一个备份被存储到了计算机的内存中，你对文件做出的任何修改，是直接映射到内存中的，并且会立即展示出来. 一旦完成了编辑，你可以保存文件，这意味着 Vim 将内存中的内容要写回磁盘. 临时存储文件的内存被称为缓存  (<strong>Buffer</strong>) .  所以，这就是为什么编辑完后要保存文件的原因.</p>
<h3 id="Swap"><a href="#Swap" class="headerlink" title="Swap"></a>Swap</h3><p>当你编辑文件时, 会在相同目录下会创建一个类似于 <code>.hello.txt.swp</code> 的文件. 查看确切的文件名可以使用如下命令:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:swapname</span><br></pre></td></tr></table></figure>

<p> Vim 维护了文件缓存区 (buffer) 的一个文件备份, 会定期保存到该文件中, 以避免出现问题时进行恢复 (如 计算机或者 Vim 程序崩溃).  这个文件被称为 <code>swap file</code>, 因为 Vim 会不断交换内存中的内容到磁盘上的文件中.</p>
<h3 id="Save-my-file"><a href="#Save-my-file" class="headerlink" title="Save my file"></a>Save my file</h3><p>当你修改了文件时, 并且没有保存, 在另一个窗口查看时, 此时是不会看到之前修改的内容的, 这也很好理解, 因为 Vim 只修改了 buffer 中的内容, 还没有保存到磁盘上. 可以通过  <code>:write</code> 命令来完成保存过程, 将内存中的内存写到磁盘中.</p>
<p><strong>为了让生活变得容易一点, 你可以使用快捷键映射, 在 vimrc 文件中:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#To save,ctrl-s.</span></span><br><span class="line">nmap &lt;c<span class="_">-s</span>&gt; :w&lt;CR&gt;</span><br><span class="line">imap &lt;c<span class="_">-s</span>&gt; &lt;Esc&gt;:w&lt;CR&gt;a</span><br></pre></td></tr></table></figure>



<h3 id="Cut-Copy-and-paste"><a href="#Cut-Copy-and-paste" class="headerlink" title="Cut, Copy and paste"></a>Cut, Copy and paste</h3><table>
<thead>
<tr>
<th>desktop</th>
<th>vim word</th>
<th>operation</th>
</tr>
</thead>
<tbody><tr>
<td>cut</td>
<td>delete</td>
<td>d</td>
</tr>
<tr>
<td>copy</td>
<td>yank</td>
<td>y</td>
</tr>
<tr>
<td>paste</td>
<td>put</td>
<td>p</td>
</tr>
</tbody></table>
<p>剪切操作在 Vim 中意味着从 buffer 中删除文本, 并将其存储到寄存器中</p>
<p>复制操作中同样也意味着拉取 (yank) 文本,并将其放到寄存器中</p>
<p>粘贴没有其特殊含义</p>
<p><strong>Why yank not copy ?</strong></p>
<blockquote>
<p><strong>Yanking is just a Vim name for copying.  The “c” letter was already used for the change operator, and “y” was still available.  Calling this operator “yank” made it easier to remember to use the “y” key.</strong></p>
<p>– Vim User Manual</p>
</blockquote>
<h4 id="如何在-Vim-中指定要在哪些文本上应用-cut-copy-paste-操作"><a href="#如何在-Vim-中指定要在哪些文本上应用-cut-copy-paste-操作" class="headerlink" title="如何在 Vim 中指定要在哪些文本上应用 cut/copy/paste 操作?"></a>如何在 Vim 中指定要在哪些文本上应用 cut/copy/paste 操作?</h4><p>你可以:</p>
<table>
<thead>
<tr>
<th>command</th>
<th>operation</th>
</tr>
</thead>
<tbody><tr>
<td>dl</td>
<td>删除单个字符</td>
</tr>
<tr>
<td>dw</td>
<td>删除一个单词</td>
</tr>
<tr>
<td>dd</td>
<td>删除一行</td>
</tr>
<tr>
<td>d$</td>
<td>删除光标位置到行尾的所有字符</td>
</tr>
<tr>
<td>dwwP</td>
<td>交换两个单词</td>
</tr>
<tr>
<td>……</td>
<td>……</td>
</tr>
</tbody></table>
<p><strong>是不是很棒, 这里最让人激动的事情在于, 你可以结合之前的移动等命令, 更多的可能不是吗?  一般的编辑器, 可能没有办法做到如此简洁, 有力 , 并保持方便记忆 !</strong></p>
<p>还记得清空当前文档的操作吗 ?</p>
<h3 id="words"><a href="#words" class="headerlink" title="words"></a>words</h3><ul>
<li><code>w</code></li>
<li><code>e</code></li>
</ul>
<h3 id="Sentence"><a href="#Sentence" class="headerlink" title="Sentence"></a>Sentence</h3><ul>
<li><code>(</code></li>
<li><code>)</code></li>
</ul>
<h3 id="Paragraph"><a href="#Paragraph" class="headerlink" title="Paragraph"></a>Paragraph</h3><ul>
<li><code>{</code></li>
<li><code>}</code></li>
</ul>
<h3 id="Visual-Mode-Select"><a href="#Visual-Mode-Select" class="headerlink" title="Visual Mode Select"></a>Visual Mode Select</h3><ul>
<li><p><code>aw</code></p>
<p> select a word</p>
</li>
<li><p><code>ap</code></p>
<p>select a paragraph</p>
</li>
<li><p><code>ab</code></p>
<p>select a block (anything with a pair of parentheses)</p>
</li>
<li><p><code>a&quot;</code></p>
<p>select a quoted string (like “this is a quoted string”)</p>
</li>
</ul>
<h3 id="Marking-your-territory"><a href="#Marking-your-territory" class="headerlink" title="Marking your territory"></a>Marking your territory</h3><ul>
<li><p>create a mark where you can jump here later</p>
<p><code>ma</code> (a-zA-Z ) then you create a mark called ‘a’</p>
</li>
<li><p>return the cursor to the mark</p>
<p><code>&#39;a</code> take you to the exact line and column of the mark</p>
</li>
</ul>
<h3 id="Time-machine-using-undo-redo"><a href="#Time-machine-using-undo-redo" class="headerlink" title="Time machine using undo/redo"></a>Time machine using undo/redo</h3><ul>
<li><p><code>u</code> undo  :leftwards_arrow_with_hook:</p>
</li>
<li><p><code>ctrl-r</code> redo :arrow_right_hook:</p>
</li>
<li><p>more…</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># take you back by 4 minutes</span></span><br><span class="line">:earlier 4m</span><br><span class="line"></span><br><span class="line"><span class="comment"># take you later by 45 seconds</span></span><br><span class="line">:later 45s</span><br><span class="line"></span><br><span class="line"><span class="comment"># go back 5 changes</span></span><br><span class="line">undo 5</span><br><span class="line"></span><br><span class="line"><span class="comment"># view the undo tree</span></span><br><span class="line">undolist</span><br></pre></td></tr></table></figure>



<h3 id="Powerful-search-engine"><a href="#Powerful-search-engine" class="headerlink" title="Powerful search engine"></a>Powerful search engine</h3><ul>
<li>basic search*</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># search</span></span><br><span class="line">/the&lt;cr&gt; <span class="comment"># /the followed by the enter key</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># next occurrence</span></span><br><span class="line">press `n`</span><br><span class="line"></span><br><span class="line"><span class="comment"># previous occurrence</span></span><br><span class="line">press `N`</span><br></pre></td></tr></table></figure>

<p>  还记得我们第一次介绍 Vim 的骚操作吗 <code>*</code> 搜索当前光标所在的单词</p>
<ul>
<li>start searching as and when you type the search phrase</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> incsearch</span><br></pre></td></tr></table></figure>

<ul>
<li>ignore the case of the text that you are searching for</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> ignorecase</span><br></pre></td></tr></table></figure>

<ul>
<li>smart case</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> smartcase</span><br></pre></td></tr></table></figure>

<ul>
<li>searching for <code>/step</code>, then it will search for any combination of upper and lower case text. So eventually, “Step”, “Stephen”,”stepbrother”</li>
<li>searching for <code>/Step</code>, <strong>only</strong> “Step”, “Stephen”, but not “stepbrother”</li>
</ul>
<ul>
<li>basic patterns</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># exactly search the word 'step' and not 'stepfather'</span></span><br><span class="line">/\&lt;step\&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># search numbers</span></span><br><span class="line">/\d\+</span><br><span class="line"></span><br><span class="line"><span class="comment"># see :help pattern for more details</span></span><br></pre></td></tr></table></figure>



<p><strong>永远不要去死记硬背这些操作, 试着理解, 并练习, 最终成为肌肉记忆.</strong></p>
<p><a href="http://vimdoc.sourceforge.net/htmldoc/usr_04.html" target="_blank" rel="noopener">vim doc</a></p>

                
            </div>
        </article>
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/Linux/Vim%20%E4%BB%8B%E7%BB%8D/">Vim 介绍</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2022-06-03</span>
                
                <span class="post-category">
                    
                    <a class="category" href="/categories/Linux/">Linux</a>
                    
                </span>
                
            </div>
            <div class="post-content">
                
                    <h2 id="Vim-的基本使用"><a href="#Vim-的基本使用" class="headerlink" title="Vim 的基本使用"></a>Vim 的基本使用</h2><p>内容取自 byte-of-vim， 查看原文，请参考文末链接.</p>
<h3 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h3><p>Vim 是一个用于写作的计算机程序（computer program），提供一系列特性帮助你更好地进行写作。 可以用来编写购物清单，写书，或者是程序代码。</p>
<h3 id="为什么选择-Vim"><a href="#为什么选择-Vim" class="headerlink" title="为什么选择 Vim"></a>为什么选择 Vim</h3><h4 id="简单"><a href="#简单" class="headerlink" title="简单"></a>简单</h4><ul>
<li>极简主义界面，帮助你集中注意力</li>
<li>少许的核心概念</li>
</ul>
<h4 id="高效"><a href="#高效" class="headerlink" title="高效"></a>高效</h4><blockquote>
<p>There is no great writing, only great rewriting.</p>
<p>​                                                        ——Louis Brandeis</p>
</blockquote>
<p>与纯文本或富文本编辑器对比，Vim 可以使得复杂大量频繁的修改该变得更容易，更快，更好。Minimal effort. Maximal effect.</p>
<h3 id="Vim-能干什么？"><a href="#Vim-能干什么？" class="headerlink" title="Vim 能干什么？"></a>Vim 能干什么？</h3><p><strong>说了这么多漂亮话，Vim 到底强在哪里？</strong></p>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><table>
<thead>
<tr>
<th>编辑</th>
<th>Vim 中的操作</th>
</tr>
</thead>
<tbody><tr>
<td>如何将光标向下移动 7 行</td>
<td>Press 7j</td>
</tr>
<tr>
<td>删除一个单词</td>
<td>Press dw</td>
</tr>
<tr>
<td>搜索文档中光标所在的单词</td>
<td>Press *</td>
</tr>
<tr>
<td>在 50-100 行进行查找并替换</td>
<td>Run :50,100s/old/new/g (s = substitute, c = confirmation )</td>
</tr>
<tr>
<td>如果光标所在的单词是一个文件，如何打开</td>
<td>gf (g = goto, f = file)</td>
</tr>
<tr>
<td>如果每行只有前N个字符是有用的？</td>
<td>ctrl-v  –&gt; y (copy)</td>
</tr>
<tr>
<td>……</td>
<td>……</td>
</tr>
</tbody></table>
<p><strong>所以，你被说服了吗？</strong></p>
<p>我们为什么学习 Vim ?</p>
<h4 id="Vim-图形化界面版本"><a href="#Vim-图形化界面版本" class="headerlink" title="Vim 图形化界面版本"></a>Vim 图形化界面版本</h4><p><strong>Windows</strong></p>
<p><strong>Mac OS X</strong></p>
<p><strong>Linux/BSD</strong></p>
<p><img src="https://raw.githubusercontent.com/weirdWimp/blog-store/main/img/image-20200901204140178.png" alt="image-20200901204140178"></p>
<p>​                                                                    Windos 下的 Vim</p>
<h4 id="终端版本"><a href="#终端版本" class="headerlink" title="终端版本"></a>终端版本</h4><p><strong>Windows</strong></p>
<p><strong>Mac OS X</strong></p>
<p><strong>Linux/BSD</strong></p>
<p><img src="https://raw.githubusercontent.com/weirdWimp/blog-store/main/img/image-20200901204402296.png" alt="image-20200901204402296"></p>
<h3 id="最重要的概念-模式"><a href="#最重要的概念-模式" class="headerlink" title="最重要的概念 - 模式"></a>最重要的概念 - 模式</h3><p>Vim 中的模式也许是最令刚接触 Vim 的人最疑惑的部分，为什么打开不能直接输入文字？该怎么样保存并退出 Vim？据说 Stack Overflow 上关于如何退出 Vim 的问题，其点击量已有上百万次了</p>
<p>Vim 中不同的模式就像是电视机中的正常模式和 DVD 模式，每种模式都有其特定的功能。模式使得功能区得以划分，使得事情变得尽可能简单。Vim 的目标之一就是使用键盘就可以完成所有工作，而不需要借助鼠标。</p>
<h4 id="Normal-Mode-正常模式-命令行模式"><a href="#Normal-Mode-正常模式-命令行模式" class="headerlink" title="Normal Mode (正常模式/命令行模式)"></a>Normal Mode (正常模式/命令行模式)</h4><p><strong>A mode for running commands</strong></p>
<p>Vim 启动的默认模式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Vim command :echo</span></span><br><span class="line">:<span class="built_in">echo</span> <span class="string">"Hello world"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Vim command :help takes us to the table of contents of the reference manual</span></span><br><span class="line">:<span class="built_in">help</span> usr_toc</span><br></pre></td></tr></table></figure>



<h4 id="Insert-Mode-插入模式-编辑模式"><a href="#Insert-Mode-插入模式-编辑模式" class="headerlink" title="Insert Mode (插入模式/编辑模式)"></a>Insert Mode (插入模式/编辑模式)</h4><p><strong>A mode for writing text</strong></p>
<p>打开 Vim，命令行模式下运行 <code>:e temp.txt</code>,  按下 <code>i</code>, 进入编辑模式，输入文本；</p>
<p>按下 <code>&lt;ESC&gt;</code>, 切换回命令行模式，运行 <code>:w</code> 命令保存</p>
<p><strong>使用命令进行更方便的移动光标</strong></p>
<p>除了  <code>i</code> 之外，你还可以 </p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Action</th>
</tr>
</thead>
<tbody><tr>
<td>i</td>
<td>insert text just before the cursor</td>
</tr>
<tr>
<td>I</td>
<td>insert text at the start of the line</td>
</tr>
<tr>
<td>a</td>
<td>append text just after the cursor</td>
</tr>
<tr>
<td>A</td>
<td>append text at the end of the line</td>
</tr>
</tbody></table>
<p>光标移动，并切换为 Insert Mode</p>
<p><strong>其他常用操作命令</strong></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Action</th>
</tr>
</thead>
<tbody><tr>
<td>o</td>
<td>open a new line below</td>
</tr>
<tr>
<td>O</td>
<td>open a new line above</td>
</tr>
<tr>
<td>s</td>
<td>substitute character</td>
</tr>
<tr>
<td>S</td>
<td>substitutes the whole line</td>
</tr>
<tr>
<td>r</td>
<td>replace the current character</td>
</tr>
<tr>
<td>R</td>
<td>replace continuous characters</td>
</tr>
</tbody></table>
<p>编辑完文本，切换回 Normal Mode, 是一个良好的习惯，完成文档的初始编写时，最好切换为 Normal Mode。</p>
<p>这两种模式的切换时如此的简单，按下 <code>i</code> 即可进入编辑模式， <code>&lt;ESC&gt;</code> 即可切换为命令行模式，图形化界面看似提供了很多菜单选项，可是如果上百个命令，以及这些命令的组合，图形化界面是难以做到的。</p>
<p>一旦你理解了 Vim 的模式 （哲学）， 你就不会觉得好难用，好奇怪，是吧？</p>
<h4 id="Visual-mode"><a href="#Visual-mode" class="headerlink" title="Visual mode"></a>Visual mode</h4><p>假如想要选中一连串的单词（words），并将它们完全替换为新的文本， 该如何做呢？你可不想按住删除键全部删除，再重新添加新的文本吧？Visual Mode 就将发挥它的作用。</p>
<p>Normal Mode 下，按下 <code>v</code> 或则 <code>V</code> 进入 Visual Mode</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>desc</th>
</tr>
</thead>
<tbody><tr>
<td>v</td>
<td>Visual Mode, character basis</td>
</tr>
<tr>
<td>V</td>
<td>Visual Mode, line basis</td>
</tr>
</tbody></table>
<p><img src="https://raw.githubusercontent.com/weirdWimp/blog-store/main/img/image-20200901215958686.png" alt="image-20200901215958686"></p>
<p>​                                                relation between the difference modes</p>
<h3 id="Graphical-cheat-sheet"><a href="#Graphical-cheat-sheet" class="headerlink" title="Graphical cheat sheet"></a>Graphical cheat sheet</h3><p><img src="https://raw.githubusercontent.com/weirdWimp/blog-store/main/img/image-20200901221532521.png" alt="image-20200901221532521"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>理解模式是如何工作的，以及如何进行模式的切换是成为一个 <strong>Vimmer</strong> 的关键，当然， Vim 也只是众多编辑器中的一种 （如 Vim 于 Emacs 之争），如何选择，取决于你的个人习惯和偏好，工欲善其事必先利其器，Vim 也只是提供了一种选择，这个看似古老的软件依然在庞大的程序员群体中占有一席之地，继续发光发热。</p>
<h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><p>[1] <a href="https://github.com/swaroopch/byte-of-vim" target="_blank" rel="noopener">A Byte of Vim</a></p>
<p>[2] <a href="https://initialcommit.com/blog/7-versatile-vim-commands" target="_blank" rel="noopener">7 versatile Vim commands that are easy to memorize</a></p>
<p>[3] <a href="https://github.com/wsdjeg/vim-galore-zh_cn" target="_blank" rel="noopener">Vim Galore</a></p>
<p>[4] <a href="http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html" target="_blank" rel="noopener">Graphical vi-vim Cheat Sheet and Tutorial</a></p>

                
            </div>
        </article>
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/Linux/Vim%20Powerful%20Commands/">Vim Powerful Commands</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2022-05-29</span>
                
                <span class="post-category">
                    
                    <a class="category" href="/categories/Linux/">Linux</a>
                    
                </span>
                
            </div>
            <div class="post-content">
                
                    <h2 id="Vim-Versatile-commands"><a href="#Vim-Versatile-commands" class="headerlink" title="` Vim Versatile commands"></a>` Vim Versatile commands</h2><ul>
<li><p><code>.</code></p>
<ul>
<li><p>通过 Normal Mode （命令行模式）下的 <code>.</code> 命令来重复上一次的修改操作. 上一次的修改意味着很多操作：Normal Mode 下删除一个或多个字符，单词，行， 如 <code>x</code>, <code>dw</code>, <code>d$</code>, <code>dd</code> 等；比如改变缩进的命令：<code>&gt;&gt;</code>, <code>&lt;&lt;</code> 等. </p>
</li>
<li><p>命令行模式下大多数命令对文本做出的修改，都可以使用 <code>.</code> 来重复；Insert Mode （编辑模式） 下做出的修改的重复取决于进入该模式的命令，加入，你通过 <code>A</code> 进入 Insert Mode, 在末尾添加了单词 <code>end</code>，按下 <code>Esc</code>,  <code>.</code> 命令会在末尾重复添加单词 <code>end</code>.</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1. You are now in Normal Mode, you have the text like those below:</span></span><br><span class="line"></span><br><span class="line">This is </span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. Press A to enter Insert Mode and write text `end`</span></span><br><span class="line">This is end</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. Press Esc to enter Normal Mode and press .(period), things will happen like this:</span></span><br><span class="line">This is end end</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. mode dot, mode ` end`</span></span><br><span class="line">This is end end end</span><br></pre></td></tr></table></figure>

<ul>
<li><code>5.</code> 表示重复执行多少次</li>
<li>Motions (光标的移动) 并不会改变任何事情，所以 <code>.</code> 并不会进行重复</li>
</ul>

                
            </div>
        </article>
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/%E7%84%A6%E8%99%91%E7%97%87/%E7%84%A6%E8%99%91%E7%97%87%E7%9A%84%E5%BA%B7%E5%A4%8D/">焦虑症的康复</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2022-03-02</span>
                
                <span class="post-category">
                    
                    <a class="category" href="/categories/%E7%84%A6%E8%99%91%E7%97%87/">焦虑症</a>
                    
                </span>
                
            </div>
            <div class="post-content">
                
                    <h2 id="焦虑症的康复"><a href="#焦虑症的康复" class="headerlink" title="焦虑症的康复"></a>焦虑症的康复</h2><h3 id="克服广场恐惧"><a href="#克服广场恐惧" class="headerlink" title="克服广场恐惧"></a>克服广场恐惧</h3><ul>
<li><p>分解步骤</p>
</li>
<li><p>想象脱敏</p>
</li>
<li><p>现实生活脱敏</p>
</li>
<li><p>增强自我以时，建立自信，勇于表达自己内心的想法，对于不想要的可以说 ”不“，以鉴定得自我接纳和自我价值观去抗衡内心的批评家</p>
</li>
</ul>
<h3 id="生理"><a href="#生理" class="headerlink" title="生理"></a>生理</h3><ul>
<li>呼吸练习</li>
<li>深层次的放松练习 肌肉练习、想象、冥想</li>
<li>定期有氧运动</li>
<li>良好的饮食习惯</li>
</ul>
<h3 id="行为"><a href="#行为" class="headerlink" title="行为"></a>行为</h3><ul>
<li>应对技巧，一开始就防止恐惧反应</li>
<li>分解步骤想象脱敏和生活脱敏</li>
</ul>
<h3 id="情感"><a href="#情感" class="headerlink" title="情感"></a>情感</h3><ul>
<li>学会确定并表达自己的感受</li>
</ul>
<h3 id="心理"><a href="#心理" class="headerlink" title="心理"></a>心理</h3><ul>
<li><p>克服消极的自我对话、克服错误信念</p>
<p>思考自己过去的错误信念，如  ”我不能犯错误“ ”我得让所有人都开心“， 对生活要采取更加轻松、自在的态度</p>
</li>
</ul>
<h3 id="人际关系"><a href="#人际关系" class="headerlink" title="人际关系"></a>人际关系</h3><ul>
<li>更加自信的人际交往</li>
</ul>
<h3 id="自我"><a href="#自我" class="headerlink" title="自我"></a>自我</h3><ul>
<li>构建自尊<ul>
<li>改变自己的外形</li>
<li>克服心中的批评</li>
<li>与自己的”内在小孩“建立练习</li>
</ul>
</li>
</ul>
<h3 id="存在主义的和精神的"><a href="#存在主义的和精神的" class="headerlink" title="存在主义的和精神的"></a>存在主义的和精神的</h3><h3 id="康复所需的条件"><a href="#康复所需的条件" class="headerlink" title="康复所需的条件"></a>康复所需的条件</h3><p>承担责任 - You are responsile for yourself. But it doesnt mean that you have to edure it by all yourself.</p>
<p>动机 - 能否克服拒绝康复带来的 ”无意义收益“</p>
<p>遵循计划不动摇</p>
<p>愿意承担风险</p>
<p>明确目标</p>
<h2 id="加重焦虑的人格类型"><a href="#加重焦虑的人格类型" class="headerlink" title="加重焦虑的人格类型"></a>加重焦虑的人格类型</h2><h3 id="完美主义"><a href="#完美主义" class="headerlink" title="完美主义"></a>完美主义</h3><p>你是出于完美主义的思维，即我应该，我必须，我不得不的想法来强迫自己来努力，还是出于自发得愿望和爱好 ?</p>
<ul>
<li><p>错误信息: 个人价值取决于个人成就</p>
<p>个人价值是客观存在的，不以别人的说辞而转移。生活中，动物或植物的价值从来都是因为它们的客观存在。无论外部成就如何，都改变不了你内在的价值。试着使用 “学会如何去爱与增加自己的智慧” 来作为标准来评价自己</p>
</li>
<li><p>完美主义思维</p>
<ul>
<li><p>应该或必须的思维模式</p>
</li>
<li><p>全或无的思维模式</p>
</li>
<li><p>概括话的思维模式</p>
<table>
<thead>
<tr>
<th>思维模式</th>
<th>反驳</th>
</tr>
</thead>
<tbody><tr>
<td>我应该有能力把这事做好</td>
<td>我会尽力而为</td>
</tr>
<tr>
<td>我绝不能犯错</td>
<td>人孰无过</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>这是彻头彻尾的错误</td>
<td>这并不全是错误的，某些方面还是可以的，只是另一方面需要多加关注</td>
</tr>
<tr>
<td>我完全做不到</td>
<td>如果我一小步一小步地做，我就可以完成任务</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>我总是把事情搞砸</td>
<td>说我总是把事情搞砸并不是事实。但我在这件事情上我是需要重新审视一下，并且进行必要的修正</td>
</tr>
<tr>
<td>我决不可能完成这事</td>
<td>如果我一步一步来，并且坚持努力的话，慢慢地我会达到我的目标</td>
</tr>
</tbody></table>
</li>
<li><p>不再夸大微小错误的严重性</p>
<p>不再因为微小的错误，而过分的苛责自己，任何的成功都离不开挫折与失败，这些微笑的错误并不会造成什么深远的影响，学会放过自己</p>
</li>
<li><p>注意力集中在积极的方面</p>
<p>不要低估已经取得的任何成就，在你思考或对自己陈述已经发生的事情，尽可能少地使用但是来否定某些事情的积极方面</p>
</li>
<li><p>把重点放在现实目标上，培养过程取向的态度</p>
<p>定下不切实际，无法完成的目标没有什么意义，反而会给自己造成过大的压力，甚至迫于压力而无法做出有效的行动。有效实际的目标可能无法一下就确定，需要根据客观条件进行调整；你参与生活中的每一件事情，不需要总是要达成一个什么样的成就，进行运动，并不是要打败时间冠军，站在世界的顶峰，单纯的只是为了享受其过程就可以了。“旅行的过程比终点更重要” “停下脚本，闻闻玫瑰的芬芳”</p>
</li>
<li><p>为生活增添愉悦和乐趣</p>
<p>不需要为了外在的目标而牺牲自己的天性需求，而造成一种呆板和克己的倾向，最终会扼杀生命的活力和创造力。不要太严肃了，为生活添加一些乐趣，从自己喜欢的事情着手，让自己放松，高兴一点</p>
</li>
</ul>
</li>
</ul>
<h2 id="自我对话与消极思维反驳"><a href="#自我对话与消极思维反驳" class="headerlink" title="自我对话与消极思维反驳"></a>自我对话与消极思维反驳</h2><p>需要不断的使用积极的对话，思维方式来替换潜意识中错误的，消极的信念，认识。</p>
<h3 id="积极自我对话"><a href="#积极自我对话" class="headerlink" title="积极自我对话"></a>积极自我对话</h3><p>对自己的提问: 胸前区，心脏难受这么长时间，而且去医院检查这么多次，肺部CT, 心电图，心脏彩超都做了，没有问题，这是会有恶疾的表现吗？所以肯定不是，对吧，那就是焦虑症引起的，那么既然是焦虑症，就应该认识到它的无害性，不需要对其产生极大的恐惧。况且你的难受程度可能并没有你想象的那么强烈，还在你的控制中</p>
<p>我不必明天就完全康复，毕竟这些症状是你长时期的坏情绪，错误的信念导致的，所以给它一点时间</p>
<p>那又能怎么样，我能处理</p>
<p>就算很焦虑，我也可以做到</p>
<p>这也许很让人害怕，但是我能忍受一定程度的焦虑，我也知道它会过去的</p>
<p>我现在这样挺好的</p>
<p>我有能力，我也有吸引力</p>
<p>我是个很特别的，富有创造性的人</p>
<p>我和其他人一样应该拥有美好的生活</p>
<p>我接纳自己，也相信自己</p>
<p>我值得其他人的尊重</p>
<p>我能继续一步一步地前进</p>
<p>我清楚已经取得的成就，也会继续努力</p>
<p>要改变永远不迟</p>
<p>我更愿意说杯子是半满的而不是半空的</p>
<p>犯错误是可以接受的</p>
<p>生命过于短暂，没必要太过较真</p>
<p>我不需要总是能够从容处理这一切</p>
<p>我的需要和感受同其他人的同样重要</p>
<p>我不希望在我生命的尽头回顾我这一生时，发出这样的感叹：我为什么总是那么严肃？</p>
<p>无论你们觉得我行不行都好，我就是行</p>

                
            </div>
        </article>
    
        <article class="post-abstract">
            <div class="post-title">
                <h2><a class="post-title-link" href="/Redis/Redis%20Cluster/">Redis Cluster</a></h2>
            </div>
            <div class="post-meta">
                <span class="post-time">2021-12-04</span>
                
                <span class="post-category">
                    
                    <a class="category" href="/categories/Redis/">Redis</a>
                    
                </span>
                
            </div>
            <div class="post-content">
                
                    <p>consistent hashing 一致性哈希</p>
<p>hash slot 哈希槽</p>
<h2 id="Redis-集群的数据分片"><a href="#Redis-集群的数据分片" class="headerlink" title="Redis 集群的数据分片"></a>Redis 集群的数据分片</h2><p>Redis 集群没有使用一致性哈希，而是使用了一种不同的数据分片形式: 每个键在概念上属于所谓的 <strong>哈希槽</strong> (hash slot) 的一部分。Redis 集群一共有 16384 个哈希槽，计算一个给定键的哈希槽，采取的方式是：<strong>键的 CRC16 对 16384 取模</strong>。</p>
<p>Redis 集群中的每一个节点都负责所有哈希槽的一个子集. 假如一个集群有三个节点，那么哈希槽的分布可能是这样:</p>
<ul>
<li>A 节点的哈希槽范围 0 - 5500</li>
<li>B 节点的哈希槽范围 5501 - 11000</li>
<li>C 节点的哈希槽范围 11001 - 16383</li>
</ul>
<p>这使得很容易在集群中增加和移除节点。例如，如果想增加一个新节点 D, 需要将 A,B,C 中的某些哈希槽移动到 D. 类似的，如果想要移除节点 A, 可以将 A  负责的哈希槽移动到 B 和 C。</p>
<p>由于从一个节点向另一个节点移动哈希槽并不需要停止操作，增加和移除节点或者改变节点所负责的哈希槽的百分比，不需要任何的宕机操作。</p>
<p>Redis 集群支持多个键的操作（多个键的同时操作），只要单个命令的执行（Redis事务，Lua脚本执行）所涉及的这些键，都属于同一个哈希槽。用户可以通过使用一个叫做 <strong>哈希标签</strong>  (hash tags) 的概念，强制多个键属于不同的哈希槽.</p>
<p>Redis 集群规范中记录了哈希标签，但重点是，如果键中的 <code>{}</code> 括号之间有一个子字符串，则仅对字符串内的内容进行哈希处理，例如 <code>this{foo}key</code> 和 <code>another{foo} key</code> 保证在同一个哈希槽中，并且可以在一个命令中一起使用多个键作为参数。</p>
<h2 id="Redis-集群的主复制模式"><a href="#Redis-集群的主复制模式" class="headerlink" title="Redis 集群的主复制模式"></a>Redis 集群的主复制模式</h2><p>Redis Cluster master-replica model</p>
<p>为了保证可以用性, 当主节点中的某些节点出现故障或者不能与集群中的大多数节点进行通信时, Redis 集群使用了一种主节点复制模式, 即每个哈希槽都有一个到 N 个副本 (N-1 个额外的副本节点).</p>
<p>在上述 A, B, C 三个节点的集群中, 如果节点 B 故障, 集群不能与之通信, 那么就不再能够提供哈希槽 0-5500 范围的服务. 然而, 如果在创建集群的时候, 为每一个主节点增加一个副本节点, 那么最终集群包含了 A, B, C 以及对应的副本节点 A1, B1, C1. 这样, 系统就能够在 B 节点故障时继续提供服务.</p>
<p>B1 节点复制节点 B, 如果 B 节点故障, 集群将使得 B1 成为新的主节点继续正确地提供服务. 但是如果 B1 和 B 同一时间都故障了, 那么集群就不能继续服务.</p>
<h2 id="Redis-集群地一致性保障"><a href="#Redis-集群地一致性保障" class="headerlink" title="Redis 集群地一致性保障"></a>Redis 集群地一致性保障</h2><p>Redis Cluster consistency guarantees</p>
<p>Redis Cluster 无法保证强一致性。实际上，这意味着在某些条件下，Redis Cluster 可能会丢失系统已向客户端确认的写入。</p>
<p>Redis Cluster 会丢失写入的第一个原因是因为它使用异步复制。这意味着在写入期间会发生以下情况：</p>
<p>客户端写入主 B。<br>主 B 向客户端回复 OK。<br>主 B 将写入传播到其副本 B1、B2 和 B3。</p>
<p>B 在回复客户端之前不会等待来自 B1、B2、B3 的确认，因为这对 Redis 来说是一个令人望而却步的延迟惩罚，因此如果您的客户端写入某些内容，B 会确认写入，但会在此之前崩溃能够将写入发送到其副本，其中一个副本（未收到写入）可以提升为主，永远失去写入。</p>
<p>这与大多数配置为每秒将数据刷新到磁盘的数据库发生的情况非常相似，因此您已经能够推理出这种情况，因为过去使用不涉及分布式系统的传统数据库系统的经验。同样，您可以通过强制数据库在回复客户端之前将数据刷新到磁盘来提高一致性，但这通常会导致性能低得令人望而却步。在 Redis Cluster 的情况下，这相当于同步复制。</p>
<p>基本上，需要在性能和一致性之间进行权衡。</p>
<p>Redis 集群在绝对需要时支持同步写入，通过 WAIT 命令实现。这使得丢失写入的可能性大大降低。但是请注意，即使使用同步复制，Redis Cluster 也没有实现强一致性：在更复杂的故障场景下，始终有可能将无法接收写入的副本选为 master。</p>
<p>还有一个值得注意的场景是 Redis 集群将丢失写入，这发生在网络分区期间，客户端与少数实例（至少包括一个主实例）隔离。</p>
<p>以我们的 6 个节点集群为例，它由 A、B、C、A1、B1、C1 组成，有 3 个主节点和 3 个副本节点。还有一个客户端，我们将其称为 Z1。</p>
<p>分区发生后，可能在分区的一侧有 A、C、A1、B1、C1，而在另一侧有 B 和 Z1。</p>
<p>Z1 仍然能够写入 B，B 将接受其写入。如果分区在很短的时间内愈合，集群将继续正常运行。但是，如果分区持续足够的时间让 B1 在分区的多数侧提升为 master，则 Z1 同时发送给 B 的写入将丢失。</p>
<p>请注意，Z1 能够发送到 B 的写入量有一个最大窗口：如果分区的多数方已经有足够的时间来选举一个副本作为主节点，那么少数方的每个主节点都将停止接受写入。</p>
<p>这个时间量是Redis Cluster一个非常重要的配置指令，称为节点超时。</p>
<p>节点超时后，主节点被视为出现故障，并且可以由其副本之一替换。类似地，在节点超时过后，主节点无法感知大多数其他主节点，它会进入错误状态并停止接受写入。</p>

                
            </div>
        </article>
    
</div>
<div class="paginator">
    
        
        <a class="prev" href="/page/3/">
            <i class="iconfont icon-prev"></i>
            Prev
        </a>
        
        
        <a class="next" href="/page/5/">
            Next
            <i class="iconfont icon-next"></i>
        </a>
        
    
</div>

    </div>
</div>
<footer class="footer-social">
    
    <a class="social-link" target="_blank" href="https://github.com/weirdwimp">
        <i class="iconfont icon-github"></i>
    </a>
    

    

    

    <div class="footer-copyright">
        <p class="time-line">
            &copy;
            
            
            2023
            &nbsp;<i class="iconfont icon-heart"></i>&nbsp;
            <a target="_blank" href="https://github.com/iJinxin"></a>
        </p>
        <p class="theme-info">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme -
            <a target="_blank" href="https://github.com/iJinxin/hexo-theme-sky">Sky</a>
        </p>
    </div>
</footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    

</script>
</html>
